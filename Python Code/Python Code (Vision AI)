import os
from google.cloud import vision

def detect_text_from_image(image_path):
    # Set up the client using the service account key
    os.environ["GOOGLE_APPLICATION_CREDENTIALS"] = r'C:\Users\kaush\OneDrive\Desktop\Python\textanalysis2.json'
    
    # Create a client
    client = vision.ImageAnnotatorClient()

    # Load the image into memory
    with open(image_path, 'rb') as image_file:
        content = image_file.read()

    # Construct an image instance
    image = vision.Image(content=content)

    # Use the client to perform text detection
    response = client.text_detection(image=image)
    texts = response.text_annotations

    if response.error.message:
        raise Exception(f'{response.error.message}')

    # Print the detected text
    if texts:
        print('Detected text:')
        for text in texts:
            print(text.description)
    else:
        print('No text detected.')

# Path to your image file
image_path = r'C:\Users\kaush\Downloads\Receipt.jpg'

# Call the function
detect_text_from_image(image_path)

